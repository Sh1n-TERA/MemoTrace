<div class="memo-form-container">
  <%= form_with(model: @memo, local: true, id: "new_memo_form") do |form| %>
    <div class="mode-tabs">
      <button type="button" class="tab-button active" data-mode="normal">通常メモ</button>
      <button type="button" class="tab-button" data-mode="error">エラー記録</button>
    </div>

    <div class="form-card">
      <div id="normal-mode-fields">
        <div class="field">
          <%= form.label :title, 'タイトル' %>
          <%= form.text_field :title, placeholder: "タイトルを入力..." %>
        </div>

        <div class="field">
          <%= form.label :content, '内容' %>
          <%= form.text_area :content, placeholder: "内容を入力..." %>
        </div>
      </div>

      <div id="error-mode-fields" style="display:none;">
        <div class="field">
          <%= form.label :error_content, 'エラー内容' %>
          <%= form.text_area :error_content, placeholder: "エラー内容を入力..." %>
        </div>

        <div class="field">
          <%= form.label :cause, '原因' %>
          <%= form.text_area :cause, placeholder: "原因を入力..." %>
        </div>

        <div class="field">
          <%= form.label :solution, '解決策' %>
          <%= form.text_area :solution, placeholder: "解決策を入力..." %>
        </div>
      </div>

      <div class="field">
        <%= form.label :tag, 'タグ' %>
        <%= form.text_field :tag, placeholder: "タグを入力 (例: #HTML #)" %>
      </div>

      <div class="field">
        <%= form.label :image, '画像添付' %>
        <div class="image-upload-area">
          <%= form.file_field :image, class: "image-input" %>
          <p>画像を添付</p>
        </div>
      </div>
      
      <%= form.hidden_field :mode, value: 'normal', id: 'memo-mode' %>
    </div>
  <% end %>
</div>